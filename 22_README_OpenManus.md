# OpenManus Agentç³»ç»Ÿ

> æ¨¡æ‹Ÿå®ç° OpenManus Agent ç³»ç»Ÿï¼Œå±•ç¤ºç°ä»£æ™ºèƒ½ Agent ç³»ç»Ÿçš„å››å¤§æ ¸å¿ƒç‰¹å¾

## ğŸŒŸ ç³»ç»Ÿæ¦‚è¿°

OpenManus Agentç³»ç»Ÿæ˜¯ä¸€ä¸ªåŠŸèƒ½å®Œæ•´çš„æ™ºèƒ½Agentç³»ç»Ÿï¼Œå®ç°äº†ç°ä»£AI Agentçš„æ ¸å¿ƒæ¶æ„æ¨¡å¼ã€‚æœ¬é¡¹ç›®æ¨¡æ‹Ÿäº†OpenManusçš„å››å¤§æ ¸å¿ƒç‰¹å¾ï¼š

### ğŸ—ï¸ å››å¤§æ ¸å¿ƒç‰¹å¾

1. **åŒæ‰§è¡Œæœºåˆ¶**
   - ğŸ¤– ç›´æ¥Agentæ¨¡å¼ï¼šåŸºäºReActæ¨¡å¼çš„æ¨ç†ä¸è¡ŒåŠ¨
   - ğŸ”„ Flowç¼–æ’æ¨¡å¼ï¼šåŸºäºå·¥ä½œæµçš„ä»»åŠ¡ç¼–æ’æ‰§è¡Œ

2. **åˆ†å±‚æ¶æ„**
   - ğŸ“± BaseAgentï¼šåŸºç¡€å±‚ï¼Œæä¾›é€šç”¨æ¥å£å’ŒçŠ¶æ€ç®¡ç†
   - ğŸ§  ReActAgentï¼šæ¨ç†è¡ŒåŠ¨å±‚ï¼Œå®ç°æ€è€ƒ-è¡ŒåŠ¨-è§‚å¯Ÿå¾ªç¯
   - ğŸ”§ ToolCallAgentï¼šå·¥å…·è°ƒç”¨å±‚ï¼Œå¢å¼ºå·¥å…·ç®¡ç†å’Œå¹¶è¡Œæ‰§è¡Œ
   - ğŸ‘‘ Manusï¼šæ ¸å¿ƒå±‚ï¼Œé›†æˆæ‰€æœ‰åŠŸèƒ½å¹¶æä¾›åŒæ‰§è¡Œæœºåˆ¶

3. **è®¡åˆ’é©±åŠ¨ä»»åŠ¡åˆ†è§£**
   - ğŸ“‹ è‡ªåŠ¨è¯†åˆ«å¤æ‚ä»»åŠ¡
   - ğŸ”€ æ™ºèƒ½ä»»åŠ¡åˆ†è§£å’Œä¾èµ–åˆ†æ
   - âš¡ æœ‰åºæ‰§è¡Œå’Œç»“æœåˆæˆ

4. **åŠ¨æ€å·¥å…·è°ƒç”¨**
   - ğŸ› ï¸ å·¥å…·æ³¨å†Œè¡¨ç®¡ç†
   - ğŸ“Š æ‰§è¡Œç»Ÿè®¡å’Œç›‘æ§
   - ğŸ”Œ æ”¯æŒè‡ªå®šä¹‰å·¥å…·æ‰©å±•

## ğŸ“ æ–‡ä»¶ç»“æ„

```
â”œâ”€â”€ 22_openmanus_agent_system.py    # æ ¸å¿ƒç³»ç»Ÿå®ç°
â”œâ”€â”€ 22_openmanus_demo.py            # æ¼”ç¤ºç¨‹åº
â””â”€â”€ 22_README_OpenManus.md          # ç³»ç»Ÿæ–‡æ¡£
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### åŸºæœ¬ä½¿ç”¨

```python
from 22_openmanus_agent_system import Manus, Message, ExecutionMode

# åˆ›å»ºManuså®ä¾‹
manus = Manus(name="MyAgent")

# è®¾ç½®æ‰§è¡Œæ¨¡å¼
manus.set_execution_mode(ExecutionMode.DIRECT_AGENT)

# å¤„ç†æ¶ˆæ¯
message = Message(content="è®¡ç®— 25 * 8 + 15", role="user")
response = manus.process_message(message)

print(response.content)
```

### è¿è¡Œæ¼”ç¤º

```bash
python 22_openmanus_demo.py
```

## ğŸ—ï¸ æ¶æ„è¯¦è§£

### åˆ†å±‚æ¶æ„è®¾è®¡

```mermaid
graph TD
    A[Manusæ ¸å¿ƒå±‚] --> B[ToolCallAgentå·¥å…·è°ƒç”¨å±‚]
    B --> C[ReActAgentæ¨ç†è¡ŒåŠ¨å±‚]
    C --> D[BaseAgentåŸºç¡€å±‚]
    
    A --> E[åŒæ‰§è¡Œæœºåˆ¶]
    A --> F[Flowç¼–æ’å¼•æ“]
    A --> G[è®¡åˆ’åˆ†è§£å™¨]
    
    B --> H[å·¥å…·æ³¨å†Œè¡¨]
    B --> I[è°ƒç”¨ç»Ÿè®¡]
    
    C --> J[æ€è€ƒå¼•æ“]
    C --> K[è¡ŒåŠ¨æ‰§è¡Œå™¨]
    C --> L[è§‚å¯Ÿæ”¶é›†å™¨]
    
    D --> M[çŠ¶æ€ç®¡ç†]
    D --> N[æ¶ˆæ¯å¤„ç†]
    D --> O[ç”Ÿå‘½å‘¨æœŸç®¡ç†]
```

### åŒæ‰§è¡Œæœºåˆ¶

#### 1. ç›´æ¥Agentæ¨¡å¼

```python
# å¯ç”¨ç›´æ¥Agentæ¨¡å¼
manus.set_execution_mode(ExecutionMode.DIRECT_AGENT)

# å¯é€‰æ‹©å¯ç”¨è®¡åˆ’é©±åŠ¨
manus.planning_enabled = True  # å¤æ‚ä»»åŠ¡è‡ªåŠ¨åˆ†è§£
manus.planning_enabled = False # ä½¿ç”¨åŸºç¡€ReActæ¨¡å¼
```

ç‰¹ç‚¹ï¼š
- åŸºäºReActæ¨¡å¼ï¼šThink â†’ Act â†’ Observe
- æ”¯æŒè®¡åˆ’é©±åŠ¨çš„ä»»åŠ¡åˆ†è§£
- é€‚åˆéœ€è¦æ¨ç†çš„å¤æ‚é—®é¢˜

#### 2. Flowç¼–æ’æ¨¡å¼

```python
# å®šä¹‰Flow
calculation_flow = {
    "name": "è®¡ç®—æµç¨‹",
    "nodes": [
        {"type": "agent", "name": "é—®é¢˜åˆ†æ"},
        {"type": "tool", "name": "calculator"},
        {"type": "agent", "name": "ç»“æœæ•´ç†"}
    ]
}

# æ³¨å†Œå¹¶ä½¿ç”¨Flow
manus.register_flow("calc_flow", calculation_flow)
manus.set_execution_mode(ExecutionMode.FLOW_ORCHESTRATION)
```

ç‰¹ç‚¹ï¼š
- é¢„å®šä¹‰çš„å·¥ä½œæµç¨‹
- èŠ‚ç‚¹åŒ–çš„ä»»åŠ¡æ‰§è¡Œ
- é€‚åˆæ ‡å‡†åŒ–çš„ä¸šåŠ¡æµç¨‹

## ğŸ§  æ ¸å¿ƒç»„ä»¶

### 1. å·¥å…·ç³»ç»Ÿ

#### å†…ç½®å·¥å…·

| å·¥å…·åç§° | åŠŸèƒ½æè¿° | ä½¿ç”¨ç¤ºä¾‹ |
|---------|---------|----------|
| calculator | æ•°å­¦è®¡ç®— | `"è®¡ç®— 25 * 8"` |
| get_time | æ—¶é—´æŸ¥è¯¢ | `"ç°åœ¨å‡ ç‚¹?"` |
| text_analyzer | æ–‡æœ¬åˆ†æ | `"åˆ†æè¿™æ®µæ–‡æœ¬"` |

#### è‡ªå®šä¹‰å·¥å…·

```python
def weather_tool(city: str) -> Dict[str, Any]:
    """å¤©æ°”æŸ¥è¯¢å·¥å…·"""
    return {"city": city, "weather": "æ™´å¤© 25Â°C"}

# æ³¨å†Œå·¥å…·
manus.register_custom_tool("weather", weather_tool, "å¤©æ°”æŸ¥è¯¢å·¥å…·")
```

### 2. è®¡åˆ’ç³»ç»Ÿ

ç³»ç»Ÿèƒ½å¤Ÿè‡ªåŠ¨è¯†åˆ«å¤æ‚æŸ¥è¯¢å¹¶è¿›è¡Œä»»åŠ¡åˆ†è§£ï¼š

```python
# å¤æ‚æŸ¥è¯¢ç¤ºä¾‹
"è¯¦ç»†åˆ†æè®¡ç®— 100 * 25 çš„ç»“æœ"

# è‡ªåŠ¨åˆ†è§£ä¸ºï¼š
# 1. æ•°æ®æå–ä»»åŠ¡
# 2. æ•°å­¦è®¡ç®—ä»»åŠ¡  
# 3. ç»“æœåˆ†æä»»åŠ¡
```

### 3. çŠ¶æ€ç®¡ç†

```python
# è·å–ç³»ç»ŸçŠ¶æ€
status = manus.get_system_status()

# çŠ¶æ€ä¿¡æ¯åŒ…å«ï¼š
{
    "agent_info": {...},           # AgentåŸºæœ¬ä¿¡æ¯
    "execution_mode": "direct",    # æ‰§è¡Œæ¨¡å¼
    "tool_stats": {...},          # å·¥å…·ä½¿ç”¨ç»Ÿè®¡
    "task_queue_size": 0,         # ä»»åŠ¡é˜Ÿåˆ—å¤§å°
    "flow_definitions": 2,        # Flowå®šä¹‰æ•°é‡
    "planning_enabled": True      # æ˜¯å¦å¯ç”¨è®¡åˆ’æ¨¡å¼
}
```

## ğŸ® æ¼”ç¤ºåŠŸèƒ½

è¿è¡Œ `22_openmanus_demo.py` å¯ä»¥ä½“éªŒä»¥ä¸‹æ¼”ç¤ºï¼š

1. **ç›´æ¥Agentæ¨¡å¼æ¼”ç¤º** - åŸºç¡€çš„æ¨ç†ä¸è¡ŒåŠ¨
2. **è®¡åˆ’é©±åŠ¨æ¨¡å¼æ¼”ç¤º** - å¤æ‚ä»»åŠ¡çš„åˆ†è§£ä¸æ‰§è¡Œ
3. **Flowç¼–æ’æ¨¡å¼æ¼”ç¤º** - å·¥ä½œæµç¨‹çš„çµæ´»ç¼–æ’
4. **åˆ†å±‚æ¶æ„æ¼”ç¤º** - å››å±‚æ¶æ„çš„ååŒå·¥ä½œ
5. **å·¥å…·ç®¡ç†æ¼”ç¤º** - åŠ¨æ€å·¥å…·æ³¨å†Œä¸è°ƒç”¨
6. **ç³»ç»Ÿç›‘æ§æ¼”ç¤º** - å®æ—¶çŠ¶æ€ç›‘æ§ä¸ç»Ÿè®¡
7. **äº¤äº’å¼æ¼”ç¤º** - ä¸ç³»ç»Ÿçš„å®æ—¶äº’åŠ¨

### äº¤äº’å¼ä½¿ç”¨

```
ğŸ‘¤ ä½ : è®¡ç®— 10 + 20 * 3
ğŸ¤– Manus: åŸºäºæˆ‘çš„åˆ†æï¼šè¿™æ˜¯ä¸€ä¸ªæ•°å­¦é—®é¢˜ï¼Œæˆ‘éœ€è¦ä½¿ç”¨è®¡ç®—å™¨å·¥å…·

æ‰§è¡Œç»“æœï¼š{'result': 70, 'expression': '10 + 20 * 3 = 70'}

ğŸ‘¤ ä½ : mode:flow
ğŸ”„ å·²åˆ‡æ¢åˆ°Flowç¼–æ’æ¨¡å¼

ğŸ‘¤ ä½ : status
ğŸ“Š ç³»ç»ŸçŠ¶æ€:
  agent_info: {'agent_id': 'abc123', 'name': 'Manus', ...}
  execution_mode: flow
  ...
```

## ğŸ”§ æ‰©å±•å¼€å‘

### æ·»åŠ æ–°å·¥å…·

```python
def my_custom_tool(param: str) -> Dict[str, Any]:
    """è‡ªå®šä¹‰å·¥å…·å®ç°"""
    return {"result": f"å¤„ç†äº†: {param}"}

manus.register_custom_tool("my_tool", my_custom_tool, "æˆ‘çš„è‡ªå®šä¹‰å·¥å…·")
```

### åˆ›å»ºæ–°çš„Flow

```python
my_flow = {
    "name": "æˆ‘çš„æµç¨‹",
    "description": "å¤„ç†ç‰¹å®šä»»åŠ¡çš„æµç¨‹",
    "nodes": [
        {"type": "agent", "name": "ä»»åŠ¡åˆ†æ"},
        {"type": "tool", "name": "my_tool", "arguments": {"param": "test"}},
        {"type": "agent", "name": "ç»“æœå¤„ç†"}
    ]
}

manus.register_flow("my_flow", my_flow)
```

### æ‰©å±•Agentå±‚

```python
class CustomAgent(Manus):
    """è‡ªå®šä¹‰Agentå®ç°"""
    
    def __init__(self, name: str = "CustomAgent"):
        super().__init__(name=name)
        # æ·»åŠ è‡ªå®šä¹‰åˆå§‹åŒ–é€»è¾‘
    
    def custom_processing(self, message: Message) -> Message:
        """è‡ªå®šä¹‰å¤„ç†é€»è¾‘"""
        # å®ç°ç‰¹æ®Šçš„å¤„ç†é€»è¾‘
        return super().process_message(message)
```

## ğŸ“Š æ€§èƒ½ç‰¹ç‚¹

### æ‰§è¡Œæ•ˆç‡

- **ReActæ¨¡å¼**: å¹³å‡3æ­¥å®Œæˆç®€å•ä»»åŠ¡
- **è®¡åˆ’æ¨¡å¼**: è‡ªåŠ¨åˆ†è§£å¤æ‚ä»»åŠ¡ï¼Œæé«˜å®Œæˆç‡
- **å·¥å…·è°ƒç”¨**: æ¯«ç§’çº§å“åº”æ—¶é—´
- **Flowæ‰§è¡Œ**: æ”¯æŒå¹¶è¡ŒèŠ‚ç‚¹æ‰§è¡Œ

### å¯æ‰©å±•æ€§

- **å·¥å…·ç³»ç»Ÿ**: æ”¯æŒæ— é™è‡ªå®šä¹‰å·¥å…·
- **Flowç³»ç»Ÿ**: æ”¯æŒå¤æ‚çš„å·¥ä½œæµå®šä¹‰
- **åˆ†å±‚æ¶æ„**: æ¯å±‚éƒ½å¯ç‹¬ç«‹æ‰©å±•
- **çŠ¶æ€ç®¡ç†**: å®Œæ•´çš„çŠ¶æ€è·Ÿè¸ªå’Œæ¢å¤

## ğŸ¯ é€‚ç”¨åœºæ™¯

### 1. æ•™è‚²å’Œç ”ç©¶
- Agentç³»ç»Ÿæ¶æ„å­¦ä¹ 
- ReActæ¨¡å¼å®éªŒ
- å·¥ä½œæµç¼–æ’ç ”ç©¶

### 2. åŸå‹å¼€å‘
- æ™ºèƒ½åŠ©æ‰‹åŸå‹
- ä¸šåŠ¡æµç¨‹è‡ªåŠ¨åŒ–
- å¤šæ¨¡æ€Agentç³»ç»Ÿ

### 3. ç³»ç»Ÿé›†æˆ
- ä½œä¸ºå­ç³»ç»Ÿé›†æˆåˆ°æ›´å¤§çš„AIåº”ç”¨
- æä¾›Agentèƒ½åŠ›çš„ä¸­é—´ä»¶
- å·¥å…·è°ƒç”¨çš„ç»Ÿä¸€æ¥å£

## ğŸ” æŠ€æœ¯ç‰¹ç‚¹

### è®¾è®¡æ¨¡å¼

- **åˆ†å±‚æ¶æ„**: æ¸…æ™°çš„èŒè´£åˆ†ç¦»
- **ç­–ç•¥æ¨¡å¼**: å¤šç§æ‰§è¡Œæ¨¡å¼å¯åˆ‡æ¢
- **è§‚å¯Ÿè€…æ¨¡å¼**: çŠ¶æ€å˜æ›´é€šçŸ¥
- **å·¥å‚æ¨¡å¼**: å·¥å…·å’ŒFlowçš„åŠ¨æ€åˆ›å»º

### æ ¸å¿ƒç®—æ³•

- **ReActç®—æ³•**: Think-Act-Observeå¾ªç¯
- **ä»»åŠ¡åˆ†è§£**: åŸºäºå…³é”®è¯çš„å¯å‘å¼åˆ†è§£
- **ä¾èµ–åˆ†æ**: ç®€å•çš„ä»»åŠ¡ä¾èµ–å…³ç³»ç®¡ç†
- **ç»“æœåˆæˆ**: å¤šä»»åŠ¡ç»“æœçš„æ™ºèƒ½èšåˆ

## ğŸ”„ ç”Ÿå‘½å‘¨æœŸ

```mermaid
graph LR
    A[åˆ›å»ºAgent] --> B[è®¾ç½®æ‰§è¡Œæ¨¡å¼]
    B --> C[æ³¨å†Œå·¥å…·/Flow]
    C --> D[å¤„ç†æ¶ˆæ¯]
    D --> E{å¤æ‚ä»»åŠ¡?}
    E -->|æ˜¯| F[ä»»åŠ¡åˆ†è§£]
    E -->|å¦| G[ç›´æ¥æ‰§è¡Œ]
    F --> H[é¡ºåºæ‰§è¡Œå­ä»»åŠ¡]
    G --> I[å·¥å…·è°ƒç”¨]
    H --> J[ç»“æœåˆæˆ]
    I --> J
    J --> K[è¿”å›å“åº”]
    K --> D
```

## ğŸ“ˆ ç›‘æ§å’Œè°ƒè¯•

### æ—¥å¿—ç³»ç»Ÿ

```python
import logging
logging.basicConfig(level=logging.INFO)

# æŸ¥çœ‹è¯¦ç»†æ‰§è¡Œæ—¥å¿—
manus.logger.setLevel(logging.DEBUG)
```

### çŠ¶æ€ç›‘æ§

```python
# è·å–è¯¦ç»†çŠ¶æ€
status = manus.get_system_status()

# å·¥å…·ä½¿ç”¨ç»Ÿè®¡
tool_stats = manus.get_tool_stats()

# æ¶ˆæ¯å†å²
messages = manus.get_messages(limit=10)
```

## ğŸ¤ è´¡çŒ®æŒ‡å—

æ¬¢è¿è´¡çŒ®ä»£ç å’Œæƒ³æ³•ï¼ä¸»è¦è´¡çŒ®æ–¹å‘ï¼š

1. **æ–°å·¥å…·å¼€å‘**: æ‰©å±•å†…ç½®å·¥å…·åº“
2. **Flowæ¨¡æ¿**: åˆ›å»ºå¸¸ç”¨çš„Flowæ¨¡æ¿
3. **æ€§èƒ½ä¼˜åŒ–**: æå‡æ‰§è¡Œæ•ˆç‡
4. **åŠŸèƒ½æ‰©å±•**: æ·»åŠ æ–°çš„Agentæ¨¡å¼
5. **æ–‡æ¡£å®Œå–„**: æ”¹è¿›ä½¿ç”¨æ–‡æ¡£å’Œç¤ºä¾‹

## ğŸ“„ è®¸å¯è¯

MIT License

## ğŸ™ è‡´è°¢

æœ¬é¡¹ç›®çµæ„Ÿæ¥æºäºï¼š
- ReAct: Reasoning and Acting in Language Models
- OpenAI Function Calling
- LangChain Agent Framework
- Microsoft Semantic Kernel

---

**OpenManus Agentç³»ç»Ÿ** - è®©æ™ºèƒ½Agentå¼€å‘æ›´ç®€å•ï¼

*Author: å±±æ³½*  
*Date: 2025-10-03*